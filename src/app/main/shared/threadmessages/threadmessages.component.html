<!-- @if(threadMessage.sameDay && threadMessage.createdBy === activeUserId) {
  <div class="editMessage">
    <textarea type="text" class="chatbox__msg" [class.chatbox__msg-sent]="threadMessage.createdBy === activeUserId"
      [(ngModel)]="threadMessage.message"></textarea>
    <div class="buttons">
      <div class="chatbox__addreaction-container">
        <img src="/img/icons/sentiment_satisfied.svg" alt="" />
      </div>
      <div class="cont">
        <button class="cancel default" (click)="cancelEdit(threadMessage)">
          Abbrechen
        </button>
        <button class="save default" (click)="saveEdit(threadMessage, true, this.activeMessageId || '')">
          Speichern
        </button>
      </div>
    </div>
  </div>
} @else {
<div class="chatbox__msg-item2" [class.chatbox__msg-sent-item2]="threadMessage.createdBy === activeUserId">
  <img class="chatbox__msg-avatar" [src]="getUserAvatar(threadMessage.createdBy) | async" alt="Avatar" width="70" height="70" />

  <div class="chatbox__msg-info" [class.chatbox__msg-sent-info]="threadMessage.createdBy === activeUserId">
    <h3 class="chatbox__msg-name" (click)="checkIdIsUser(threadMessage.createdBy)">
      {{ threadMessage.creatorName }}
    </h3>
    <p class="chatbox__msg-time">
      {{ threadMessage.timestamp | date : "HH:mm" }}
    </p>
  </div>
  <p class="chatbox__msg" [class.chatbox__msg-sent]="threadMessage.createdBy === activeUserId">
    {{ threadMessage.message }}
  </p>
  <app-reactions class="chatbox__reaction-wrapper" [reactions]="threadMessage.reactions"
    [activeUserId]="activeUserId || ''" [messageId]="threadMessage.docId || ''" [isThreadMessage]="true" (reactionAdded)="
        addEmoji(
          $event.messageId,
          activeUserId!,
          $event.emoji,
          $event.isThreadMessage
        )
      ">
  </app-reactions>
</div>
} -->

  <div class="chatbox__msg-container" [class.chatbox__msg-container__sent]="threadMessage.createdBy === activeUserId" id="{{ threadMessage.docId }}">
    @if (isChatBoxEmojiPickerOpen() && chatBoxEmojiPickerOpenFor() === threadMessage.docId){
          <div [class]="{
            'emoji-picker__wrapper-left-thread':
              displayPickerBottom && threadMessage.createdBy !== activeUserId,
            'emoji-picker__wrapper-top-right-thread':
              !displayPickerBottom && threadMessage.createdBy !== activeUserId,
            'emoji-picker__wrapper-top-left-thread':
              !displayPickerBottom && threadMessage.createdBy === activeUserId,
            'emoji-picker__wrapper-right-thread':
              displayPickerBottom && threadMessage.createdBy === activeUserId
          }" (click)="preventEmojiPickerClose($event)">
        <app-emoji-picker componentName="chatbox" (emoji)="addEmoji(threadMessage.docId, activeUserId!, $event, true)" />
      </div>
    }
    <!-- Emoji hinzufügen Button -->
    <button class="chatbox__addemoji-container">
      @if (getLastUsedEmojis(0)) {
        <span class="chatbox__addemoji__lastUsedEmoji" (click)="addEmoji(threadMessage.docId!, activeUserId!, getLastUsedEmojis(0), true)">
          {{ getLastUsedEmojis(0) }}
        </span>
      }
      @if (getLastUsedEmojis(1)) {
        <span class="chatbox__addemoji__lastUsedEmoji" (click)="addEmoji(threadMessage.docId!, activeUserId!, getLastUsedEmojis(1), true)">
          {{ getLastUsedEmojis(1) }}
        </span>
      }
      @if (threadMessage.docId) {      
        <div class="chatbox__addemoji__emoji-container" (click)="toggleEmojiPicker(threadMessage.docId , true)">
          <img src="/img/icons/addemoji.svg" alt="Emoji hinzufügen">
        </div>
      }
    </button>
  
    <!-- Nachricht anzeigen -->
    <div class="chatbox__msg-item2" [class.chatbox__msg-sent-item2]="threadMessage.createdBy === activeUserId">
      <div class="chatbox__msg-info" [class.chatbox__msg-sent-info]="threadMessage.createdBy === activeUserId">
        <h3 class="chatbox__msg-name">{{ threadMessage.creatorName }}</h3>
        <p class="chatbox__msg-time">{{ threadMessage.timestamp | date: "HH:mm" }}</p>
      </div>
      <p class="chatbox__msg" [class.chatbox__msg-sent]="threadMessage.createdBy === activeUserId">
        {{ threadMessage.message }}
      </p>
      <app-reactions class="chatbox__reaction-wrapper"
        [reactions]="threadMessage.reactions"
        [activeUserId]="activeUserId || ''"
        [messageId]="threadMessage.docId || ''"
        [isThreadMessage]="true"
        (reactionAdded)="addEmoji($event.messageId, activeUserId!, $event.emoji, true)">
      </app-reactions>
    </div>
  </div>
